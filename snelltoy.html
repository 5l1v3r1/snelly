

<body onload="onLoad();">

 <head>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<div id="container">
    <div id="webglContainer"></div> <canvas id="render-canvas"></canvas>
    <div id="threeContainer"></div> <canvas id="ui-canvas"></canvas>
</div>

<script type="text/javascript" src="js/thirdparty/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="js/thirdparty/three/three.min.js"></script>
<script type="text/javascript" src="js/thirdparty/three/libs/stats.min.js"></script>
<script type="text/javascript" src="js/thirdparty/three/libs/dat.gui.min.js"></script>
<script type="text/javascript" src="js/thirdparty/three/controls/OrbitControls.js"></script>

<script type="text/javascript" src="js/shaders.js"></script>
<script type="text/javascript" src="js/spectrum.js"></script>
<script type="text/javascript" src="js/gl.js"></script>
<script type="text/javascript" src="js/laser.js"></script>
<script type="text/javascript" src="js/gui.js"></script>
<script type="text/javascript" src="js/renderer.js"></script>
<script type="text/javascript" src="js/material.js"></script>

<script type="text/javascript" src="js/scenes/scene.js"></script>
<script type="text/javascript" src="js/scenes/sphere.js"></script>

<script type="text/javascript">

// Renderer object
var renderer;

// GUI object
var gui;

// shim layer with setTimeout fallback
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame    ||
          function( callback ){
            window.setTimeout(callback, 1000/60);
          };
})();

function onLoad()
{
	window.addEventListener( 'resize', onWindowResize, false );

	// Instantiate renderer object
	renderer = new Renderer();

	// Create scenes
	renderer.addScene(new SphereScene("sphere", "Simple sphere"));
	renderer.addScene(new FibreScene("fibre", "Simple optical fibre"));

	// Create materials
	renderer.addMaterial( new ConstantDielectric("constant", "Constant IOR dielectric", 1.5) ); 
	renderer.addMaterial( new SellmeierDielectric("diamond", "Diamond",       0.0, 0.3306,     0.175,         4.3356,      0.1060,       0.0,        0.0       ) );
	renderer.addMaterial( new SellmeierDielectric("glass_bk7", "Glass (BK7)", 0.0, 1.03961212, 0.00600069867, 0.231792344, 0.0200179144, 1.01046945, 103.560653) );
	renderer.addMaterial(new LinearMetal("aluminium", "Aluminium",  0.46555, 4.7121, 1.6620, 8.0439));
	renderer.addMaterial(new LinearMetal("gold", "Gold",            1.5275, 1.8394, 0.16918, 3.8816));


	// Create dat gui
	gui = new GUI(renderer);

	// Start
	renderer.loadScene("sphere");
	renderer.loadMaterial("glass_bk7");

	animateLoop();
}

function camChanged()
{
	renderer.reset();
}

function animateLoop() 
{
	requestAnimFrame(animateLoop);
	renderer.render();
}

function onWindowResize() 
{
	var render_canvas = document.getElementById('render-canvas');
	render_canvas.width  = window.innerWidth;
	render_canvas.height = window.innerHeight;

	var ui_canvas = document.getElementById('ui-canvas');
	ui_canvas.width  = window.innerWidth;
	ui_canvas.height = window.innerHeight;

	renderer.resize(render_canvas.width, render_canvas.height);
	renderer.render();
}

</script>

</body>


