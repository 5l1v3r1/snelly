Snelly is a webGL-based pathtracer of SDF (signed distance field) scenes. 

The entire HTML source of a very basic scene is the following:

    <body onload="onLoad();">
    <script type="text/javascript" src="../js/compiled/snelly.min.js"></script>
    <script type="text/javascript">

    function Scene() {}
    Scene.prototype.init = function(snelly)
    {
    	this.par = {};
    	this.par.R = 0.5;
    }

    Scene.prototype.shader = function()
    {
    	return `
    		uniform float R;
    		float sdSphere(vec3 X, float r) { return length(X)-r; }   
    		float SDF_DIELECTRIC(in vec3 X)                     
    		{	
    			return sdSphere(X, R);
    		} 
    	`;
    }

    Scene.prototype.initGui = function(gui) { gui.addParameter(this.par, {name: 'R', min: 0.0, max: 1.0}); }
    Scene.prototype.syncShader = function(shader) { shader.uniformF("R", this.par.R); }
    Scene.prototype.getScale = function() { return 1.0; }

    var snelly;
    function onLoad() { snelly = new Snelly(new Scene()); animateLoop(); }
    function animateLoop() { snelly.render(); window.requestAnimationFrame(animateLoop); }

    </script>
    </body>

## Scene

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### init

Optionally (but usually), provide this function to set scene and renderer initial state.

**Parameters**

-   `snelly`  
-   `The` **Snelly** snelly object

### initGenerator

Optionally, provide this function which generates the init code to re-generate 
the current UI parameter settings. This will be dumped to the console (along with 
the rest of the UI state) on pressing key 'O', allowing the scene and renderer
state to be tweaked in the UI then saved by copy-pasting code into the init function below.

### envMap

Optionally, supply an env-map texture URL (must be a lat-long format image).
(If this is function not implemented, or it returns the empty string, a uniform
temperature blackbody sky is used).

### getName

Optional name (displayed in UI)

### getURL

Optional clickable URL (displayed in UI)

### shader

Return a chunk of GLSL code defining the SDFs which determine the geometry of uber-surface, metal and dielectric materials in the scene.
Define also (optionally) functions giving the 3d spatial dependence of the material parameters.
This function is mandatory!

The code must define at least one of the three functions:

     float SDF_METAL(vec3 X);
     float SDF_DIELECTRIC(vec3 X);
     float SDF_DIFFUSE(vec3 X);

(If only one or two of these are present, the others will not be rendered).
Optionally, any of the following functions defining the spatial modulation of material parameters can be defined:

    float SDF_SURFACE(in vec3 X)                     
    vec3 SURFACE_DIFFUSE_REFLECTANCE(in vec3 X)
    vec3 SURFACE_SPECULAR_REFLECTANCE(in vec3 X)
    float SURFACE_IOR(in vec3 X)
    float SURFACE_ROUGHNESS(in vec3 X)

    float SDF_METAL(in vec3 X)                     
    vec3 METAL_SPECULAR_REFLECTANCE(in vec3 X)
    float METAL_ROUGHNESS(in vec3 X)

    float SDF_DIELECTRIC(vec3 X)                     
    vec3 DIELECTRIC_SPECULAR_REFLECTANCE(in vec3 X)
    float DIELECTRIC_ROUGHNESS(in vec3 X)

### initGui

/\* Optional. Set up gui and callbacks for this scene

**Parameters**

-   `gui`  
-   `The` **GUI** GUI object

### syncShader

/_ Optional. Called whenever the UI is changed,
/_ and must sync the params of the shader with the current UI settings

**Parameters**

-   `shader`  
-   `The` **Shader** Shader object

### getScale

Optional. Gives the raytracer some indication of the (rough) scene length scale, 
so it can set tolerances appropriately. Note, the raymarcher will march no further
from the camera than 100 times this scale, and the smallest resolvable structure 
is about 1.0e-5 this scale.

### preframeCallback

Optional callback before every frame.
Animation rendering logic can be implemented here by updating the scene 
programmatically according to the global time since init

**Parameters**

-   `snelly`  
-   `gl`  
-   `The` **Snelly** snelly object
-   `The` **[WebGLRenderingContext](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext)** webGL context

### postframeCallback

Optional callback after every frame.
Animation rendering logic can be implemented here by updating the scene 
programmatically according to the global time since init

**Parameters**

-   `snelly`  
-   `gl`  
-   `The` **Snelly** snelly object
-   `The` **[WebGLRenderingContext](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext)** webGL context

## Snelly

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### getCamera

Get camera object

Returns **THREE.PerspectiveCamera** the camera object.

### getMaterials

Get materials object

Returns **Materials** the Materials object.

### getSurface

Get Surface object

Returns **Surface** the Surface object.

## Renderer

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## Materials

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### setRoughness

Set surface roughness

**Parameters**

-   `roughness`  
-   `the` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** surface roughness in [0,1].

## Gui

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## GLU

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->
